name: build

on:
  pull_request:

jobs:
  Build:
    runs-on: ubuntu-latest
  steps:
    - name: Checkout ğŸ›ï¸
      uses: actions/checkout@v2
  
    - name: Verify .rs and toml files ğŸ‘€
      uses: technote-space/get-diff-action@v6.1.0
      id: git_diff
      with:
        PATTERNS: |
          **/**.rs
          **/**.toml

    - name: Prepare rust cache ğŸ—„ï¸
      if: env.GIT_DIFF
      uses: Swatinem/rust-cache@v2

    - name: Setup Rust âš™ï¸
      if: env.GIT_DIFF
      uses: actions-rs/toolchain@v1
      with:
        toolchain: stable
        override: true

    - name: Setup Wasm Target âš™ï¸
      run: rustup target add wasm32-unknown-unknown
    
    - name: Build contracts ğŸ”¨
      if: env.GIT_DIFF
      run: cargo build --target wasm32-unknown-unknown
